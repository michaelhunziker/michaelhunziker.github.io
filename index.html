
       <html>

<head>
       <meta charset="utf-8">
        <title>Test4</title>
       
       <script>
              

              
      function getParameterByName(name, url) {
           if (!url) url = window.location.href;
           name = name.replace(/[\[\]]/g, "\\$&");
           var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
               results = regex.exec(url);
           if (!results) return null;
           if (!results[2]) return '';
           return decodeURIComponent(results[2].replace(/\+/g, " "));
          }
          
          var action = getParameterByName('action');
          
          if (action === 'cookieFix') {
                 alert('fix cookie');
                 document.cookie = "name=Testcookie";
                 
                 
           //window.location.href = getParameterByName('blkbURL');
          }    
              
          else {
              document.cookie = "name=Gabriel Brodmann";
              var cookieContent = document.cookie;
                 
          }
               

       function windowLocation(){
              window.location.href = window.location.href;
       }  

       function postMessage(){
              
              parent.postMessage("Test Message","*");
       } 

       function showPopup(){
              //window.open('popup.html', 'popup window', 'width=200,height=200');  
              alert('sending postmessage: safariCookieFix');
              
              
              window.top.location.href = 'https://michaelhunziker.github.io/index.html#?action=cookieFix&blkbURL=' + window.top.location.href;
              
              window.top.location.href='http://anotherURL.com'
              
              //window.parent.postMessage({name: 'safariCookieFix'}, "*");
              
       } 
              
       function reload() {
              window.location.href = window.location.href;      
       }


            

       </script>
</head>
<body style="background-color: #00FFFF">
       
       <h1>Test iFrame 4</h1>
     
       Cookie: <span id="cookie"></span>
       
       <div id="timer"></div>
       
       <div id="confirm" style="display:none;position:absolute;top:0;left:0;height:100%;width:100%;background-color:yellow">
              Diese Seite verwendet Cookies. <a style="cursor:pointer; text-decoration:underline" onclick="showPopup()">MÃ¶chten Sie Cookies zulassen?</a>
              
              <button onclick="reload()">reload iframe</button>
       
       </div>
     
</body>
<script>

       if(document.cookie === ''){
              document.getElementById("confirm").style.display = 'block';
       }

       document.getElementById("cookie").textContent = cookieContent;
       document.getElementById("timer").textContent = new Date();
     
</script>
</html>

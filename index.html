<html>

<head>
    <meta charset="utf-8">
    <title></title>

    <script>
        function getParameterByName(name, url) {
            if (!url) {
                url = window.location.href;
            }
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) {
                return null;
            }
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        if (getParameterByName('action') === 'cookieFix') {
            var url = getParameterByName('blkbURL');
            document.cookie = "name=Safari Cookie";
            window.location.href = url;
        }
        else {
            document.cookie = "name=Some Cookie";
            var cookieContent = document.cookie;
        }

        function confirm() {
            window.parent.postMessage({name: 'safariCookieFix'}, "*");
        }

    </script>
</head>

<body style="background-color:green">

Cookie: <span id="cookie"></span>

<br>
Debug:<span id="debug"></span>
<br>

<div id="confirm" style="display:none;position:absolute;top:0;left:0;height:100%;width:100%;background-color:yellow">
    Diese Seite verwendet Cookies. <a style="cursor:pointer; text-decoration:underline" onclick="confirm()">MÃ¶chten Sie Cookies zulassen?</a>
</div>

</body>

<script>
    if (document.cookie === '') {
        document.getElementById("confirm").style.display = 'block';
    }
    document.getElementById("cookie").textContent = cookieContent;
</script>

</html>

